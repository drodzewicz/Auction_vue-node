(function(t){function e(e){for(var s,r,o=e[0],c=e[1],l=e[2],d=0,m=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0155":function(t,e,a){"use strict";var s=a("1502"),i=a.n(s);i.a},"01f7":function(t,e,a){},"09d6":function(t,e,a){},"0f65":function(t,e,a){},"0fc1":function(t,e,a){t.exports=a.p+"img/bags.6e40e045.svg"},1:function(t,e){},"11cf":function(t,e,a){"use strict";var s=a("d0a1"),i=a.n(s);i.a},"14fd":function(t,e,a){"use strict";var s=a("bc1d"),i=a.n(s);i.a},1502:function(t,e,a){},"16a3":function(t,e,a){"use strict";var s=a("cd8c"),i=a.n(s);i.a},"189c":function(t,e,a){"use strict";var s=a("54e3"),i=a.n(s);i.a},"206d":function(t,e,a){"use strict";var s=a("4413"),i=a.n(s);i.a},"214a":function(t,e,a){},"21bb":function(t,e,a){"use strict";var s=a("2dad"),i=a.n(s);i.a},"252c":function(t,e,a){},"2aa4":function(t,e,a){},"2dad":function(t,e,a){},"2e4b":function(t,e,a){"use strict";var s=a("ba9a"),i=a.n(s);i.a},"2ee5":function(t,e,a){},3027:function(t,e,a){"use strict";var s=a("2ee5"),i=a.n(s);i.a},"3acd":function(t,e,a){"use strict";var s=a("4613"),i=a.n(s);i.a},"3c3c":function(t,e,a){"use strict";var s=a("7509"),i=a.n(s);i.a},"3f86":function(t,e,a){},4057:function(t,e,a){"use strict";var s=a("8b13"),i=a.n(s);i.a},4413:function(t,e,a){},"458c":function(t,e,a){"use strict";var s=a("252c"),i=a.n(s);i.a},4613:function(t,e,a){},4654:function(t,e,a){"use strict";var s=a("8468"),i=a.n(s);i.a},4678:function(t,e,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=n(t);return a(e)}function n(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=n,t.exports=i,i.id="4678"},"4b48":function(t,e,a){"use strict";var s=a("89f7"),i=a.n(s);i.a},"4db0":function(t,e,a){t.exports=a.p+"img/double-arrow.37b0284c.svg"},"53d7":function(t,e,a){"use strict";var s=a("01f7"),i=a.n(s);i.a},"54e3":function(t,e,a){},"56ad":function(t,e,a){t.exports=a.p+"img/user-icon-2.0cc976f6.svg"},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"bus",(function(){return Ei}));var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("navbar"),a("div",{staticClass:"content-container"},[a("router-view")],1),a("Footer")],1)},n=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nav-wrapper"},[s("nav",{attrs:{id:"main-nav"}},[s("router-link",{attrs:{id:"app-logo",to:"/"}},[s("img",{attrs:{src:a("9b19")}})]),null==t.GET_USER.username?s("div",{staticClass:"authenticated-false nav-menu"},[s("router-link",{staticClass:"nav-item",attrs:{to:"/login"}},[t._v("Login")])],1):s("div",{staticClass:"authenticated-true nav-menu"},[s("router-link",{staticClass:"nav-item chat-button",attrs:{to:"/chat"}},[s("img",{attrs:{src:a("f3c4")}})]),s("profile-dropdown",[s("button",{staticClass:"nav-item profile-btn",attrs:{slot:"profile-btn"},slot:"profile-btn"},[s("VImage",{attrs:{imageUrl:t.GET_USER.avatar,defaultImage:"/default_avatar_image.svg"}}),s("span",{staticClass:"username"},[t._v(t._s(t.GET_USER.username))])],1)])],1)],1),s("pop-down")],1)},o=[],c=a("2f62"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("img",{class:t.classes,attrs:{src:t.imageUrl},on:{error:t.imageLoadError}})},u=[],d={name:"VImage",props:{imageUrl:{type:String},classes:{type:String},defaultImage:{type:String,default:"/image_not_loaded.svg"}},methods:{imageLoadError(t){t.target.src=this.defaultImage}}},m=d,p=a("2877"),h=Object(p["a"])(m,l,u,!1,null,null,null),g=h.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"profile drop-down-wrapper"},[a("button",{staticClass:"button-wrapper",on:{click:t.toggleOpenDropDown}},[t._t("profile-btn")],2),t.isOpen?a("div",{staticClass:"drop-down"},[a("router-link",{attrs:{to:"/profile"},nativeOn:{click:function(e){return t.toggleOpenDropDown(e)}}},[t._v("Profile")]),a("button",{on:{click:t.logOutUser}},[t._v("Logout")])],1):t._e()])},f=[],b={name:"ProfileDropdown",data(){return{isOpen:!1}},methods:{toggleOpenDropDown(){this.isOpen=!this.isOpen},logOutUser(){this.toggleOpenDropDown(),this.$store.dispatch("LOGOUT")}}},_=b,y=(a("aa00"),Object(p["a"])(_,v,f,!1,null,null,null)),C=y.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("div",{staticClass:"pop-down-container",class:[t.messageType]},[a("span",{staticClass:"content"},[t._v(t._s(this.content))])]):t._e()},w=[],E={name:"PopDown",data(){return{show:!1,content:"",messageType:"",timer:""}},created(){Ei.$on("changeMessage",(t,e)=>{this.show=t!==this.content,this.content=t,this.messageType=e})},updated(){this.timer=setTimeout(()=>{this.content="",this.messageType="",this.show=!1},5e3)},watch:{show(t,e){t||clearTimeout(this.timer)}}},j=E,$=(a("14fd"),Object(p["a"])(j,D,w,!1,null,null,null)),S=$.exports,P={name:"Navbar",components:{VImage:g,ProfileDropdown:C,PopDown:S},computed:Object(c["b"])(["GET_USER"])},A=P,U=(a("16a3"),Object(p["a"])(A,r,o,!1,null,null,null)),R=U.exports,x=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},k=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"footer"},[s("a",{staticClass:"footer-item",attrs:{id:"app-author",href:"https://github.com/DaRoTP"}},[s("img",{attrs:{src:a("adc4"),alt:"user"}}),s("span",[t._v("Author: DaRo")])]),s("a",{staticClass:"footer-item",attrs:{id:"app-source-code",href:"https://github.com/DaRoTP/Auction_vue-node"}},[s("img",{attrs:{src:a("a150"),alt:"source code"}}),s("span",[t._v("Source Code")])])])}],T={},I=T,L=(a("53d7"),Object(p["a"])(I,x,k,!1,null,null,null)),O=L.exports,F={name:"App",components:{Navbar:R,Footer:O},created(){this.authenticateUser()},methods:{...Object(c["b"])(["GET_USER","GET_USERID"]),listenForNotification(t){Ei.$emit("changeMessage","new message from "+t.newMessage,""),Ei.$emit("markUnreadMessage",t.roomId)},listenForBidNotification(t){Ei.$emit("changeMessage","you have been outbiddet on "+t.auctionName,"")},async authenticateUser(){this.$store.watch(()=>this.GET_USER().username,()=>{this.GET_USER().username?(this.$sock.emit("joinUserRoom",{userId:this.GET_USERID()}),this.$sock.on("chatUserInfo",this.listenForNotification),this.$sock.on("chatUserBidInfo",this.listenForBidNotification)):null==this.GET_USER().username&&(this.$sock.removeListener("chatUserInfo",this.listenForNotification),this.$sock.removeListener("chatUserBidInfo",this.listenForBidNotification))});try{const t=await this.$http.get("api/auth/isAuthenticated");this.$sock.open(),this.$store.commit("UPDATE_USER",t.data.user),this.$store.commit("UPDATE_AVATAR",t.data.avatarImage||""),this.$store.commit("UPDATE_USERID",t.data.id)}catch(t){this.$store.commit("UPDATE_USER",null),this.$store.commit("UPDATE_USERID",null)}}}},B=F,M=(a("5c0b"),Object(p["a"])(B,i,n,!1,null,null,null)),V=M.exports,N=a("8c4f"),G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home-container"},[t._m(0),s("section",{staticClass:"offers"},[s("img",{staticClass:"wave-bg",attrs:{src:a("de19"),alt:"wave"}}),s("div",{staticClass:"offer-wrapper"},[t.spinner?s("spinner-1"):t._e(),t.spinner?t._e():s("product-container",{attrs:{auctions:t.auctions}}),!t.spinner&&t.auctions.length>7?s("router-link",{staticClass:"more",attrs:{to:"/auction"}},[s("span",[t._v("More")]),s("img",{attrs:{src:a("f51c"),alt:"more"}})]):t._e()],1)])])},q=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"landing-page-cover"},[s("div",{staticClass:"welcome-container"},[s("h1",{staticClass:"welcome"},[t._v("Welcome to Bidder!")]),s("h3",{staticClass:"welcome-text"},[t._v("Here you will find what you are looking for.")]),s("h3",{staticClass:"welcome-text"},[t._v("Auction, buy and win !")])]),s("img",{attrs:{id:"love-icon",src:a("fb84"),alt:"love"}}),s("img",{attrs:{id:"bags",src:a("0fc1"),alt:"bags"}})])}],z=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"spinner-1"},[a("div",{staticClass:"loadingio-spinner-pulse-3pnpgc3cva"},[a("div",{staticClass:"ldio-l1cpb39xxx"},[a("div"),a("div"),a("div")])])])}],H={name:"Spinner"},W=H,Q=(a("7757"),Object(p["a"])(W,z,Y,!1,null,null,null)),J=Q.exports,Z=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},K=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"spinner-2"},[a("div",{staticClass:"loadingio-spinner-dual-ring-s7tzyhrrfx9"},[a("div",{staticClass:"ldio-t31fo04ebks"},[a("div"),a("div",[a("div")])])])])}],X={name:"Spinner"},tt=X,et=(a("3c3c"),Object(p["a"])(tt,Z,K,!1,null,null,null)),at=et.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-container"},t._l(t.auctions,(function(t){return a("auction-card",{key:t._id,attrs:{id:t._id,name:t.name,descriptions:t.description,image:t.image,price:t.price,endDate:new Date(t.endDate),startDate:new Date(t.startDate)}})})),1)},it=[],nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{staticClass:"auction-link",attrs:{to:"/auction/"+this.id}},[a("div",{staticClass:"auction-card-container"},[a("div",{staticClass:"card-overlay"},[a("h2",{staticClass:"auction-title"},[t._v(t._s(t.name))]),a("section",{staticClass:"description"},[t._v(t._s(t.descriptions))])]),a("v-image",{attrs:{classes:"auction-image",imageUrl:t.image}}),a("div",{staticClass:"content-body"},[a("h2",{staticClass:"auction-title"},[t._v(t._s(t.name))])]),a("div",{staticClass:"time-count-down-label"},[a("span",{staticClass:"time"},[isNaN(this.startDate)?a("span",[t._v(" Buy Now ")]):t._e(),isNaN(this.startDate)?t._e():a("timer",{attrs:{startDate:t.startDate,endDate:t.endDate}})],1),a("span",{staticClass:"price"},[t._v(t._s(t.price+" "+t.GET_CURRENCY()))])])],1)])},rt=[],ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"timer"},[t._v(" "+t._s(this.now)+" ")])},ct=[];const lt=t=>{const e=1e3,a=60*e,s=60*a,i=24*s,n=()=>{const n=new Date,r=t-n;if(r<0)return"expired";const o=Math.floor(r/i),c=Math.floor(r%i/s),l=Math.floor(r%s/a),u=Math.floor(r%a/e);return o>0?`${o}d ${c}h`:c>0?`${c}h ${l}m`:l>0?`${l}m ${u}s`:u+"s"};return n()};var ut=lt,dt={name:"Timer",props:{startDate:{type:Date},endDate:{type:Date}},data(){return{now:"expired",liveCounDownInterval:null}},created(){this.liveAuctionCountDown()},methods:{liveAuctionCountDown(){const t=new Date;let e,a;if(t<this.startDate){if(this.now="starts in "+ut(this.startDate),e=this.startDate-t,e>0){const t=e<=36e5?1e3:6e4;this.liveCounDownInterval=setInterval(()=>{a=ut(this.startDate),"expired"===a?(this.$emit("timerStatus",!0),a=ut(this.endDate),this.$emit("timerStatus","expired"!==a),this.now=a):this.now="starts in "+ut(this.startDate)},t)}}else if(t<this.endDate&&(this.now=ut(this.endDate),e=this.endDate-t,e>0)){const t=e<=36e5?1e3:6e4;this.liveCounDownInterval=setInterval(()=>{a=ut(this.endDate),this.$emit("timerStatus","expired"!==a),this.now=a},t)}}}},mt=dt,pt=Object(p["a"])(mt,ot,ct,!1,null,null,null),ht=pt.exports,gt={name:"AuctionCard",components:{VImage:g,Timer:ht},props:{id:{type:String},name:{type:String},descriptions:{type:String},image:{type:String},price:{type:Number},endDate:{type:Date},startDate:{type:Date}},data(){return{liveCounDownInterval:null}},created(){},beforeDestroy(){clearInterval(this.liveCounDownInterval)},methods:{...Object(c["b"])(["GET_CURRENCY"])}},vt=gt,ft=(a("11cf"),Object(p["a"])(vt,nt,rt,!1,null,null,null)),bt=ft.exports,_t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("router-link",{staticClass:"auction-link-mini",attrs:{to:"/auction/"+this.id}},[s("div",{staticClass:"auction-card-mini-container"},[s("div",{staticClass:"image-wrapper"},[s("div",{staticClass:"tag-wrapper"},[t.isSold?s("img",{staticClass:"sold-tag",attrs:{src:a("f8fc"),alt:"sold"}}):t._e()]),s("v-image",{attrs:{classes:"auction-image",imageUrl:t.image}})],1),s("div",{staticClass:"content-body"},[s("h2",{staticClass:"auction-title"},[t._v(t._s(t.name))]),s("div",{staticClass:"product-tags",class:{auction:!t.endDate}},[t.endDate?s("span",{staticClass:"tag auction"},[t._v("Auction")]):t._e(),t.endDate?t._e():s("span",{staticClass:"tag buy"},[t._v("Buy Now")]),s("span",{staticClass:"price"},[t._v(t._s(t.formatPrice)),s("span",{staticClass:"currency"},[t._v(t._s(this.GET_CURRENCY))])])])])])])},yt=[],Ct={name:"AuctionCard",components:{VImage:g},props:{id:{type:String},name:{type:String},image:{type:String},price:{type:Number},highestBidder:{type:Number},endDate:{type:String,default:void 0},buyer:{type:Object}},computed:{...Object(c["b"])(["GET_CURRENCY"]),formatPrice(){const t=this.highestBidder?this.highestBidder:this.price;return""+Math.floor(100*t)/100},isEnded(){const t=new Date,e=new Date(this.endDate);return t>e},isSold(){const t=this.isEnded&&void 0!==this.buyer,e=!this.endDate&&void 0!==this.buyer;return t||e}}},Dt=Ct,wt=(a("4057"),Object(p["a"])(Dt,_t,yt,!1,null,null,null)),Et=wt.exports,jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auction-card-live-wrapper"},[a("div",{staticClass:"banner",class:{isWinning:t.isWinning}},[t._v("Winning")]),a("div",{staticClass:"auction-card-live-container"},[a("div",{staticClass:"title-bids-wrapper"},[a("div",{staticClass:"main-auction-info"},[a("v-image",{attrs:{imageUrl:t.image}}),a("h3",{staticClass:"auction-name"},[t._v(t._s(t.name))])],1),a("div",{staticClass:"biding-table"},[a("span",{staticClass:"time"},[a("i",{staticClass:"fas fa-clock"}),a("timer",{attrs:{endDate:new Date(t.endDate)},on:{timerStatus:t.setAuctionStatus}})],1),a("div",{staticClass:"bid-table-wrapper"},t._l(t.bids,(function(t){return a("bid-card",{key:t.id,attrs:{timeStamp:new Date(t.timeStamp),price:parseFloat(t.price),username:t.author.username}})})),1)])]),a("div",{staticClass:"input-bid-container"},[t.isAuctionLive?a("place-bid-input",{attrs:{auctionId:t.id}}):t._e(),a("router-link",{staticClass:"go-to-link",attrs:{to:"/auction/"+this.id}},[t._v("more")])],1)])])},$t=[],St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bid-card-container"},[a("div",{staticClass:"text-content"},[a("strong",{staticClass:"username"},[t._v(t._s(t.username))]),a("span",{staticClass:"time-stamp"},[t._v(t._s(t.momentTime))])]),a("div",{staticClass:"price-label"},[t._v(" "+t._s(this.formatPrice)+" "),a("span",{staticClass:"currency"},[t._v(t._s(this.GET_CURRENCY))])])])},Pt=[],At=a("c1df"),Ut=a.n(At),Rt={name:"BidCard",props:{username:{type:String},price:{type:Number},timeStamp:{type:Date,default:Date.now()}},computed:{...Object(c["b"])(["GET_CURRENCY"]),momentTime(){return Ut()(this.timeStamp).fromNow()},formatPrice(){return Math.floor(100*this.price)/100}}},xt=Rt,kt=(a("dd5f"),Object(p["a"])(xt,St,Pt,!1,null,null,null)),Tt=kt.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-area"},[t.displayLabel?a("label",{attrs:{for:"username"}},[t._v(t._s((t.required?"* ":"")+" "+t.name+":"))]):t._e(),a("textarea",{class:{error:t.error.length>0},attrs:{name:t.name},domProps:{value:t.value},on:{input:function(e){return t.updateValue(e.target.value)}}}),a("span",{staticClass:"error-msg"},[t._v(t._s(t.error))])])},Lt=[];const Ot=(t,e)=>{if(e.matchString){const a=t.trim()===e.matchString;if(!a)return"password does not match"}if(e.required){const e=""!==t.trim();if(!e)return"can't be blank"}if(e.minLength){const a=t.length>=e.minLength;if(!a)return"must not be shorter than "+e.minLength}if(e.maxLength){const a=t.length<=e.maxLength;if(!a)return"must not be longer than "+e.maxLength}if(e.string){const e=/^([a-zA-Z ]*)$/.test(t);if(!e)return"some characters are not allowed"}if(e.spaces){const e=/^([^ ]*)$/.test(t);if(!e)return"spaces are not allowd"}if(e.number){const e=/^(\d*)$/.test(t);if(!e)return"must be a number"}return""};var Ft=Ot,Bt={name:"AreaText",props:{value:{type:String},name:{type:String},validation:{type:Object},required:{type:Boolean},displayLabel:{type:Boolean,default:!0}},data(){return{error:""}},methods:{updateValue(t){void 0!==this.validation&&(this.error=Ft(t,this.validation)),this.$emit("input",t),this.$emit("validateField",this.name,0===this.error.length)}}},Mt=Bt,Vt=(a("4b48"),Object(p["a"])(Mt,It,Lt,!1,null,null,null)),Nt=Vt.exports,Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"place-bid-input"},[a("button",{staticClass:"primary-btn",attrs:{type:"submit"},on:{click:t.placeBid}},[t._v("bid")]),a("span",{staticClass:"currency"},[t._v(t._s(this.GET_CURRENCY()))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],attrs:{min:"0",type:"Number"},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}})])},qt=[],zt={name:"PlaceBidInput",props:{auctionId:{type:String}},data(){return{price:0}},methods:{...Object(c["b"])(["GET_CURRENCY"]),placeBid(t){t.preventDefault(),this.$sock.emit("liveBid",{roomId:this.auctionId,bid:this.price},t=>{Ei.$emit("changeMessage",t,"error")}),this.price=""}}},Yt=zt,Ht=(a("e917"),Object(p["a"])(Yt,Gt,qt,!1,null,null,null)),Wt=Ht.exports,Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"search-bar"},[a("input",{attrs:{placeholder:"Search",type:"text"},domProps:{value:t.input},on:{input:function(e){return t.updateValue(e.target.value)}}}),a("button",{attrs:{type:"submit"},on:{click:t.execSearch}},[a("i",{staticClass:"fas fa-search"})])])},Jt=[],Zt={name:"SearchBard",props:{input:{type:String}},methods:{updateValue(t){this.$emit("input",t)},execSearch(t){t.preventDefault(),this.$emit("search")}}},Kt=Zt,Xt=(a("57af"),Object(p["a"])(Kt,Qt,Jt,!1,null,null,null)),te=Xt.exports,ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"switch-container"},[a("span",{attrs:{id:"true-label"}},[t._v(t._s(t.trueLabel))]),a("button",{staticClass:"switch-body",class:{on:t.isAuction},attrs:{type:"button",value:t.isAuction},on:{click:t.toggleSwitchState}},[a("div",{staticClass:"switch"})]),a("span",{attrs:{id:"false-label"}},[t._v(t._s(t.falseLabel))])])},ae=[],se={model:{prop:"isAuction",event:"click"},name:"SwitchButton",props:{trueLabel:{type:String,default:"on"},falseLabel:{type:String,default:"off"},isAuction:{type:Boolean,default:!1}},methods:{toggleSwitchState(){this.$emit("click",!this.isAuction)}}},ie=se,ne=(a("458c"),Object(p["a"])(ie,ee,ae,!1,null,null,null)),re=ne.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-input"},[t.displayLabel?a("label",[t._v(t._s((t.required?"* ":"")+t.name+":"))]):t._e(),a("input",{class:{error:t.isValid},attrs:{min:t.min,type:t.type},domProps:{value:t.value},on:{input:function(e){return t.updateValue(e.target.value)}}}),a("span",{staticClass:"error-msg"},[t._v(t._s(t.dislpayError))])])},ce=[],le={name:"TextInput",props:{value:{type:String},min:{type:Number,default:0},type:{type:String,default:"text"},name:{type:String},required:{type:Boolean},displayLabel:{type:Boolean,default:!0},validation:{type:Object},error:{type:String,default:""}},data(){return{errorState:""}},methods:{updateValue(t){this.$emit("input",t),this.validation&&(this.errorState=Ft(t,this.validation),this.$emit("validateField",this.name,0===this.errorState.length))}},computed:{isValid(){return""!==this.error||this.errorState.length>0},dislpayError(){return""!==this.errorState?this.errorState:this.error}}},ue=le,de=(a("8cf7"),Object(p["a"])(ue,oe,ce,!1,null,null,null)),me=de.exports,pe={name:"AuctionCardLive",components:{BidCard:Tt,PlaceBidInput:Wt,VImage:g,Timer:ht},data(){return{myBid:"",isAuctionLive:!1}},props:{id:{type:String},name:{type:String},image:{type:String},price:{type:Number},endDate:{type:Date},bids:{type:Array}},created(){this.bids=this.bids.reverse(),this.joinBiddingRoom(),this.isAuctionLive=!this.isEnded},beforeDestroy(){clearInterval(this.liveCountDownInterval),this.leaveBiddingRoom()},methods:{...Object(c["b"])(["GET_USER"]),senfBid(t,e){e===this.id&&this.bids.unshift(t)},joinBiddingRoom(){this.$sock.emit("joinBidding",{room:this.id}),this.$sock.on("sendBid",this.senfBid)},leaveBiddingRoom(){this.$sock.emit("leaveBidding",{room:this.id}),this.$sock.removeListener("sendBid",this.senfBid)},setAuctionStatus(t){this.isAuctionLive=t}},computed:{isWinning(){return this.GET_USER().username===this.bids[0].author.username},isEnded(){const t=new Date,e=new Date(this.endDate);return t>e}}},he=pe,ge=(a("e93e"),Object(p["a"])(he,jt,$t,!1,null,null,null)),ve=ge.exports,fe={name:"ProductContainer",components:{AuctionCard:bt},props:{auctions:{type:Array}}},be=fe,_e=(a("6c3d"),Object(p["a"])(be,st,it,!1,null,null,null)),ye=_e.exports,Ce={name:"Home",components:{ProductContainer:ye,Spinner1:J},data(){return{auctions:[],spinner:!0}},created(){this.fetchAuctions()},methods:{async fetchAuctions(){this.spinner=!0;try{const t=await this.$http.get("/api/auction?page=1&limit=8&finished=false"),{items:e}=t.data.auctions;this.auctions=e,this.spinner=!1}catch(t){this.spinner=!1}}}},De=Ce,we=(a("21bb"),Object(p["a"])(De,G,q,!1,null,null,null)),Ee=we.exports,je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-container"},[t._m(0),a("form",{staticClass:"login-form"},[t._l(t.loginFields,(function(e){return a("text-input",{key:e.name,attrs:{value:e.value,name:e.name,type:e.type,validation:e.validation,error:e.error},on:{validateField:t.validateFieldLogin},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"field.value"}})})),a("button",{staticClass:"primary-btn",attrs:{type:"submit",disabled:!t.isReadyToSent||t.spinner},on:{click:t.login}},[t._v(" Login "),t.spinner?a("spinner-2"):t._e()],1),a("router-link",{attrs:{id:"registration-link",to:"/register"}},[t._v("Dont't have an account ?")])],2)])},$e=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",{staticClass:"form-title"},[s("img",{attrs:{src:a("bd20"),alt:"lock"}}),s("span",[t._v("Login")])])}],Se={name:"Login",components:{TextInput:me,Spinner2:at},data(){return{spinner:!1,loginFields:[{isValid:!1,name:"Username",value:"",error:"",validation:{required:!0,spaces:!1}},{isValid:!1,name:"Password",value:"",error:"",type:"password",validation:{required:!0,spaces:!1}}]}},methods:{...Object(c["c"])(["UPDATE_USER","UPDATE_AVATAR","UPDATE_USERID"]),validateFieldLogin(t,e){this.loginFields=this.loginFields.map(a=>t===a.name?{...a,isValid:e}:a)},async login(t){t.preventDefault(),this.spinner=!0;try{const t=await this.$http.post("/api/auth/login",{username:this.loginFields[0].value,password:this.loginFields[1].value});this.UPDATE_USER(t.data.user.username),this.UPDATE_AVATAR(t.data.user.avatarImage||""),this.UPDATE_USERID(t.data.user.id),this.$sock.open(),this.spinner=!1,this.$router.push("/")}catch(e){this.UPDATE_USER(null),this.UPDATE_USERID(null),401===e.response.status&&(this.loginFields=this.loginFields.map(t=>({...t,error:"bad login"}))),this.spinner=!1}}},computed:{isReadyToSent(){return this.loginFields.reduce((t,e)=>t&&e.isValid,!0)}}},Pe=Se,Ae=(a("206d"),Object(p["a"])(Pe,je,$e,!1,null,null,null)),Ue=Ae.exports,Re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"register-container"},[t._m(0),a("form",{staticClass:"register-form"},[t._l(t.loginFields,(function(e){return a("text-input",{key:e.name,attrs:{value:e.value,name:e.name,type:e.type,validation:e.validation,error:e.error,required:e.validation.required},on:{validateField:t.validateFieldLogin},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"field.value"}})})),a("button",{staticClass:"primary-btn",attrs:{type:"submit",disabled:!t.isReadyToSent||t.spinner},on:{click:t.registerUser}},[t._v(" Register "),t.spinner?a("spinner-2"):t._e()],1)],2)])},xe=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",{staticClass:"form-title"},[s("img",{attrs:{src:a("56ad"),alt:"user"}}),s("span",[t._v("Register")])])}],ke={name:"Register",components:{TextInput:me,Spinner2:at},data(){return{spinner:!1,loginFields:[{isValid:!1,name:"Username",value:"",error:"",validation:{required:!0,spaces:!1,minLength:3,maxLength:15}},{isValid:!1,name:"Password",value:"",error:"",type:"password",validation:{required:!0,spaces:!1,minLength:5}},{isValid:!1,name:"Repeat password",value:"",error:"",type:"password",validation:{matchString:"",required:!0,spaces:!1,minLength:5}}]}},methods:{async registerUser(t){t.preventDefault(),this.spinner=!0;try{await this.$http.post("/api/auth/register",{username:this.loginFields[0].value,password:this.loginFields[1].value}),Ei.$emit("changeMessage","succefully registered","success"),this.spinner=!1,this.$router.push("/login")}catch(e){e.response.data.err&&(this.loginFields[0].error=e.response.data.msg.username||""),this.spinner=!1}},validateFieldLogin(t,e){this.loginFields=this.loginFields.map(a=>t===a.name?{...a,isValid:e}:a)}},computed:{matchPassword(){return this.loginFields[1].value},isReadyToSent(){return this.loginFields.reduce((t,e)=>t&&e.isValid,!0)}},watch:{matchPassword(t){this.loginFields[2].validation.matchString=t}}},Te=ke,Ie=(a("a894"),Object(p["a"])(Te,Re,xe,!1,null,null,null)),Le=Ie.exports,Oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("auction-editor",{on:{submitData:t.createAuction}})},Fe=[],Be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auction-editor-container"},[a("form",{staticClass:"auction-editor-form"},[a("div",{staticClass:"column-container"},[a("div",{staticClass:"primary-fields field-col"},[t._l(t.mainFields,(function(e){return a("text-input",{key:e.name,attrs:{value:e.value,name:e.name,type:e.type,required:e.validation.required,validation:e.validation},on:{validateField:t.vallidateAuctionFields},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"field.value"}})})),a("area-text",{attrs:{value:t.description.value,name:t.description.name,validation:t.description.validation,required:t.description.validation.required},on:{validateField:t.vallidateAuctionFields},model:{value:t.description.value,callback:function(e){t.$set(t.description,"value",e)},expression:"description.value"}})],2),a("div",{staticClass:"seccondary-fields field-col"},[a("v-image",{staticClass:"product-image",attrs:{imageUrl:t.imageURL.value}}),a("text-input",{attrs:{value:t.imageURL.value,name:t.imageURL.name,type:t.imageURL.type,required:t.imageURL.validation.required,validation:t.imageURL.validation},on:{validateField:t.vallidateAuctionFields},model:{value:t.imageURL.value,callback:function(e){t.$set(t.imageURL,"value",e)},expression:"imageURL.value"}}),a("switch-button",{attrs:{trueLabel:"buy now",falseLabel:"auction"},model:{value:t.isAuction,callback:function(e){t.isAuction=e},expression:"isAuction"}}),a("div",{staticClass:"end-date-container",class:{open:t.isAuction}},t._l(t.dateFields,(function(e){return a("text-input",{key:e.name,attrs:{value:e.value,name:e.name,type:e.type,required:e.validation.required,validation:e.validation},on:{validateField:t.vallidateAuctionFields},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"field.value"}})})),1)],1)]),a("div",{staticClass:"button-container"},[a("button",{staticClass:"primary-btn",attrs:{type:"submit",disabled:!t.isReadyToSent||t.spinner},on:{click:t.submitFunction}},[t._v(" Submit "),t.spinner?a("spinner-2"):t._e()],1),"UPDATE"===t.method?a("button",{staticClass:"secondary-btn",attrs:{type:"button"},on:{click:t.deleteProduct}},[t._v(" Delete Product ")]):t._e()])])])},Me=[],Ve={name:"AuctionEditor",components:{TextInput:me,AreaText:Nt,Spinner2:at,VImage:g,SwitchButton:re},data(){return{spinner:!1,author:null,imageURL:{isValid:!0,name:"Image link",value:"",validation:{spaces:!0}},mainFields:[{isValid:!1,name:"Name",value:"",validation:{minLength:5,required:!0}},{isValid:!1,name:"Starting price",value:"",type:"Number",validation:{required:!0,spaces:!0}},{isValid:!0,name:"Tags",value:"",validation:{}}],description:{isValid:!1,name:"Description",value:"",validation:{required:!0}},isAuction:!1,dateFields:[{isValid:!1,name:"Start date",value:"",type:"Date",validation:{required:!0}},{isValid:!1,name:"Start time",value:"",type:"Time",validation:{required:!0}},{isValid:!1,name:"End date",value:"",type:"Date",validation:{required:!0}},{isValid:!1,name:"End time",value:"",type:"Time",validation:{required:!0}}]}},props:{method:{type:String,default:"CREATE"}},created(){"UPDATE"===this.method&&this.getAuctionInfo()},methods:{...Object(c["b"])(["GET_USER"]),submitFunction(t){t.preventDefault();const e={name:this.mainFields[0].value,description:this.description.value,tags:this.mainFields[2].value.split(" "),image:this.imageURL.value,price:parseFloat(this.mainFields[1].value),startDate:this.isAuction?`${this.dateFields[0].value} ${this.dateFields[1].value}`:void 0,endDate:this.isAuction?`${this.dateFields[2].value} ${this.dateFields[3].value}`:void 0};this.$emit("submitData",e)},deleteProduct(){const t=window.confirm("are you sure you want to delete this product?");t&&this.$emit("deleteProduct")},async getAuctionInfo(){try{const t=await this.$http.get("/api/auction/"+this.$route.params.id),{author:e,buyer:a,name:s,description:i,image:n,price:r,tags:o,endDate:c,startDate:l}=t.data;this.author=e.username,this.buyer=void 0!==a?a.username:void 0,this.imageURL={...this.imageURL,value:n,isValid:!0},this.mainFields[0]={...this.mainFields[0],value:s,isValid:!0},this.mainFields[1]={...this.mainFields[1],value:r.toString(),isValid:!0},this.mainFields[2]={...this.mainFields[2],value:o.join(" "),isValid:!0},this.description={...this.description,value:i,isValid:!0},this.isAuction=void 0!==c,void 0!==c&&(this.startDate=new Date(l),this.dateFields[0].value=void 0!==l?l.substring(0,10):"",this.dateFields[0].isValid=!0,this.dateFields[1].value=void 0!==l?new Date(l).toLocaleTimeString("it-IT"):"",this.dateFields[1].isValid=!0,this.dateFields[2].value=void 0!==l?c.substring(0,10):"",this.dateFields[2].isValid=!0,this.dateFields[3].value=void 0!==l?new Date(c).toLocaleTimeString("it-IT"):"",this.dateFields[3].isValid=!0),this.isUserAuthor?this.isEditable?this.isStarted&&(Ei.$emit("changeMessage","you can't edit auction that has already started","error"),this.$router.replace("/")):(Ei.$emit("changeMessage","you can't edit this auction","error"),this.$router.replace("/")):(Ei.$emit("changeMessage","you are not authorized to do this","error"),this.$router.replace("/"))}catch(t){Ei.$emit("changeMessage","failed to load auction","error"),this.$router.replace("/error-notfound")}},vallidateAuctionFields(t,e){"Description"===t&&(this.description.isValid=e),"Image link"===t&&(this.imageURL.isValid=e),this.mainFields=this.mainFields.map(a=>t===a.name?{...a,isValid:e}:a),this.dateFields=this.dateFields.map(a=>t===a.name?{...a,isValid:e}:a)}},computed:{isReadyToSent(){const t=this.mainFields.reduce((t,e)=>t&&e.isValid,!0);let e=this.dateFields.reduce((t,e)=>t&&e.isValid,!0);e=!this.isAuction||e;const a=this.description.isValid;return t&&a&&e},isUserAuthor(){return this.GET_USER().username===this.author},isStarted(){const t=new Date;return t>=this.startDate},isEditable(){return!this.isStarted&&this.isUserAuthor&&(""===this.buyer||void 0===this.buyer)}}},Ne=Ve,Ge=(a("e605"),Object(p["a"])(Ne,Be,Me,!1,null,null,null)),qe=Ge.exports,ze={name:"NewAuction",components:{AuctionEditor:qe},methods:{async createAuction(t){const{name:e,description:a,tags:s,image:i,price:n,startDate:r,endDate:o}=t;this.spinner=!0;try{const t=await this.$http.post("/api/auction",{name:e,description:a,tags:s,image:i,price:n,startDate:r,endDate:o});this.spinner=!1,this.$router.push("/auction/"+t.data.auction._id)}catch(c){let t="something went wrong";void 0!==c.response.data.msg.endDate?t=c.response.data.msg.endDate:void 0!==c.response.data.msg.startDate&&(t=c.response.data.msg.startDate),Ei.$emit("changeMessage",t,"error"),this.spinner=!1}}}},Ye=ze,He=Object(p["a"])(Ye,Oe,Fe,!1,null,null,null),We=He.exports,Qe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"auction-show-wrapper"},[t.isLoading?s("spinner-1"):t._e(),t.isLoading?t._e():s("div",{staticClass:"auction-show-container"},[s("section",{staticClass:"auction-details"},[s("div",{staticClass:"image-wrapper"},[s("v-image",{staticClass:"product-image",class:{sold:t.shouldDisplayBuyer},attrs:{imageUrl:t.image}}),t.shouldDisplayBuyer?s("img",{staticClass:"sold-tag",attrs:{src:a("f8fc"),alt:""}}):t._e(),s("div",{staticClass:"user-bar author-bar"},[s("VImage",{attrs:{imageUrl:this.author.avatar,defaultImage:"/default_avatar_image.svg"}}),s("span",[t._v(t._s(this.author.username))])],1)],1),s("div",{staticClass:"price-and-buttins"},[s("div",{staticClass:"price"},[s("span",[t._v(t._s(t.price+" "+this.GET_CURRENCY()))])]),void 0===t.startDate&&void 0===t.buyer&&t.GET_USER().username&&!t.isUserAuthor?s("button",{staticClass:"buynow-btn",on:{click:t.buyAuction}},[t._v("Buy Now")]):t._e(),t.isEditable?s("router-link",{staticClass:"edit-btn secondary-btn",attrs:{to:"/auction/"+t.id+"/edit"}},[s("i",{staticClass:"fas fa-edit"}),t._v(" Edit")]):t._e(),t.shouldDisplayBuyer&&t.isUserAuthor?s("router-link",{staticClass:"contact-btn secondary-btn",attrs:{to:"/chat/"+t.buyer}},[s("i",{staticClass:"fas fa-edit"}),t._v("Contact Buyer")]):t._e()],1),s("div",{staticClass:"text-details"},[s("h2",{staticClass:"ptoduct-title"},[t._v(t._s(t.name))]),t.startDate&&t.endDate?s("div",{staticClass:"dates"},[s("div",{staticClass:"date date-start"},[s("span",{staticClass:"label"},[t._v("Auction starts:")]),s("span",{staticClass:"calendar"},[s("i",{staticClass:"fas fa-calendar-alt"}),s("span",[t._v(t._s(t.getDateDate(this.startDate)))])]),s("span",{staticClass:"time"},[s("i",{staticClass:"fas fa-clock"}),s("span",[t._v(t._s(t.getDateTime(this.startDate)))])])]),s("div",{staticClass:"date date-end"},[s("span",{staticClass:"label"},[t._v("Auction ends:")]),s("span",{staticClass:"calendar"},[s("i",{staticClass:"fas fa-calendar-alt"}),s("span",[t._v(t._s(t.getDateDate(this.endDate)))])]),s("span",{staticClass:"time"},[s("i",{staticClass:"fas fa-clock"}),s("span",[t._v(t._s(t.getDateTime(this.endDate)))])])])]):t._e(),s("p",{staticClass:"product-description"},[t._v(t._s(t.description))])])]),s("bid-table",{attrs:{endDate:t.endDate,startDate:t.startDate,bids:t.bids,auctionId:t.id,isUserAuthor:t.isUserAuthor}})],1)],1)},Je=[],Ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return void 0!==t.startDate?a("div",{staticClass:"bidding-container"},[a("div",{staticClass:"bid-table-wrapper"},[a("div",{staticClass:"banner",class:{isWinning:t.isWinning}},[t._v("Winning")]),a("div",{staticClass:"bid-table"},[a("span",{staticClass:"live-coundown"},[a("i",{staticClass:"fas fa-clock"}),a("timer",{attrs:{startDate:new Date(t.startDate),endDate:new Date(t.endDate)},on:{timerStatus:t.setAuctionStatus}})],1),this.isAuctionLive&&t.GET_USER().username&&!t.isUserAuthor?a("place-bid-input",{attrs:{auctionId:t.auctionId}}):t._e(),a("div",{staticClass:"bid-box"},t._l(t.bids,(function(t){return a("bid-card",{key:t.id,attrs:{timeStamp:new Date(t.timeStamp),price:parseFloat(t.price),username:t.author.username}})})),1)],1)])]):t._e()},Ke=[],Xe={name:"BidTable",components:{BidCard:Tt,PlaceBidInput:Wt,Timer:ht},data(){return{isAuctionLive:!1}},props:{startDate:{type:Date},endDate:{type:Date},bids:{type:Array},auctionId:{type:String},isUserAuthor:{type:Boolean}},created(){void 0!==this.startDate&&void 0!==this.endDate&&(this.isAuctionLive=this.isStarted&&!this.isEnded)},methods:{...Object(c["b"])(["GET_USER"]),setAuctionStatus(t){this.isAuctionLive=t}},computed:{isWinning(){return 0!==this.bids.length&&this.bids[0].author.username===this.GET_USER().username},isEnded(){const t=new Date,e=new Date(this.endDate);return t>e},isStarted(){const t=new Date,e=new Date(this.startDate);return t>=e}}},ta=Xe,ea=(a("189c"),Object(p["a"])(ta,Ze,Ke,!1,null,null,null)),aa=ea.exports,sa={name:"AuctionShow",components:{VImage:g,Spinner1:J,BidTable:aa},data(){return{isLoading:!0,id:null,name:"",description:"",image:"",price:null,endDate:"",startDate:"",author:{username:"",avatar:""},buyer:"",bids:[]}},created(){this.getAuctionInfo()},beforeDestroy(){clearInterval(this.liveCounDownInterval),this.leaveBiddingRoom(),this.$sock.removeListener("sendBid",this.sendBid)},computed:{isStarted(){const t=new Date,e=new Date(this.startDate);return t>=e},isEnded(){const t=new Date,e=new Date(this.endDate);return t>e},isUserAuthor(){return this.GET_USER().username===this.author.username},isEditable(){return!this.isStarted&&this.isUserAuthor&&(""===this.buyer||void 0===this.buyer)},shouldDisplayBuyer(){const t=this.isEnded&&(""!==this.buyer||void 0!==this.buyer),e=void 0===this.endDate&&void 0===this.startDate&&void 0!==this.buyer;return t||e}},methods:{...Object(c["b"])(["GET_USER","GET_CURRENCY"]),async buyAuction(){try{const t=await this.$http.patch(`api/auction/${this.id}/buy`);Ei.$emit("changeMessage",t.data.msg,"success"),this.buyer=this.GET_USER().username}catch(t){Ei.$emit("changeMessage","failed to buy auction","error")}},async getAuctionInfo(){try{const t=await this.$http.get("/api/auction/"+this.$route.params.id),{_id:e,name:a,description:s,image:i,price:n,endDate:r,startDate:o,bids:c,author:l,buyer:u}=t.data;this.id=e,this.name=a,this.description=s,this.image=i,this.price=n,this.endDate=r?new Date(r):void 0,this.startDate=o?new Date(o):void 0,this.bids=c.reverse(),this.author={username:l.username||"",avatar:l.avatarImage||""},this.buyer=void 0!==u?u.username:void 0,this.joinBiddingRoom(),this.isLoading=!1}catch(t){Ei.$emit("changeMessage","failed to buy auction","error"),this.isLoading=!1,this.$router.replace("/error-notfound")}},sendBid(t){this.bids.unshift(t)},joinBiddingRoom(){this.$sock.emit("joinBidding",{room:this.id}),this.$sock.on("sendBid",this.sendBid)},leaveBiddingRoom(){this.$sock.emit("leaveBidding",{room:this.id})},getDateDate(t){return Ut()(t).format("MM-DD-YYYY")},getDateTime(t){return Ut()(t).format("hh:mm")}}},ia=sa,na=(a("4654"),Object(p["a"])(ia,Qe,Je,!1,null,null,null)),ra=na.exports,oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("auction-editor",{attrs:{method:"UPDATE"},on:{submitData:t.updateAuction,deleteProduct:t.deleteAuction}})},ca=[],la={name:"EditAuction",components:{AuctionEditor:qe},methods:{async updateAuction(t){const{name:e,description:a,tags:s,image:i,price:n,startDate:r,endDate:o}=t,c={name:e,description:a,tags:s,image:i,price:n,startDate:r,endDate:o};try{const t=await this.$http.put("/api/auction/"+this.$route.params.id,c);Ei.$emit("changeMessage","succesfully updated auction","success"),this.$router.push("/auction/"+t.data.auction._id)}catch(l){let t="something went wrong";void 0!==l.response.data.msg.endDate?t=l.response.data.msg.endDate:void 0!==l.response.data.msg.startDate&&(t=l.response.data.msg.startDate),Ei.$emit("changeMessage",t,"error")}},async deleteAuction(){try{const t=await this.$http.delete("/api/auction/"+this.$route.params.id);Ei.$emit("changeMessage",t.data.msg,"success"),this.$router.push("/profile/my-auctions")}catch(t){""===t.response.data.msg&&void 0===t.response.data.msg||Ei.$emit("changeMessage",t.response.data.msg,"error")}}}},ua=la,da=Object(p["a"])(ua,oa,ca,!1,null,null,null),ma=da.exports,pa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"profile-container"},[s("nav",{staticClass:"profile-nav",class:{hide:!t.showSubNavBar}},[s("div",{staticClass:"nav-header"},[s("span",{staticClass:"arrows",on:{click:t.toggleSubNav}},[s("img",{attrs:{src:a("4db0"),alt:"double arrow",srcset:""}})])]),s("ul",{staticClass:"profile-navigation-tab"},[s("router-link",{staticClass:"profile-nav-item",attrs:{to:"/profile"}},[t._v("Profile")]),s("router-link",{staticClass:"profile-nav-item",attrs:{to:"/profile/my-auctions"}},[t._v("My Products")]),s("router-link",{staticClass:"profile-nav-item",attrs:{to:"/profile/live-auctions"}},[t._v("Live Auctions")]),s("router-link",{staticClass:"profile-nav-item",attrs:{to:"/profile/participated"}},[t._v("Participations")]),s("router-link",{staticClass:"profile-nav-item",attrs:{to:"/profile/purchased"}},[t._v("Purchases")])],1)]),s("div",{staticClass:"profile-content"},[s("router-view")],1)])},ha=[],ga={name:"ProfilePages",data(){return{showSubNavBar:!0}},methods:{toggleSubNav(){this.showSubNavBar=!this.showSubNavBar}}},va=ga,fa=(a("5e34"),Object(p["a"])(va,pa,ha,!1,null,null,null)),ba=fa.exports,_a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("profile-sub-page",{attrs:{isEmpty:0===t.auctions.length,title:"My Auctions",isLoading:t.isLoading}},[a("router-link",{staticClass:"create-auction",attrs:{slot:"before",to:"/new-auction"},slot:"before"},[t._v("Create new auction"),a("i",{staticClass:"fas fa-plus-square"})]),a("div",{staticClass:"aucion-box",attrs:{slot:"content"},slot:"content"},t._l(t.auctions,(function(t){return a("auction-card-mini",{key:t._id,attrs:{id:t._id,name:t.name,image:t.image,price:t.price,endDate:t.endDate,buyer:t.buyer}})})),1),a("pagination",{attrs:{slot:"pagination",currentPage:t.currentPage,prev:t.prevPage,next:t.nextPage},slot:"pagination",model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},ya=[],Ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination-container"},[a("div",{staticClass:"next-item"},[a("div",{staticClass:"btn-container",class:{show:t.prev}},[a("button",{staticClass:"pgination-btn",on:{click:t.prevPage}},[a("i",{staticClass:"fas fa-angle-left"})])]),t.prev?a("span",{staticClass:"item",on:{click:t.prevPage}},[t._v(t._s(this.currentPage-1))]):t._e()]),t.prev||t.next?a("span",{staticClass:"item selected"},[t._v(t._s(this.currentPage))]):t._e(),a("div",{staticClass:"next-item"},[t.next?a("span",{staticClass:"item",on:{click:t.nextPage}},[t._v(t._s(this.currentPage+1))]):t._e(),a("div",{staticClass:"btn-container",class:{show:t.next}},[a("button",{staticClass:"pgination-btn",on:{click:t.nextPage}},[a("i",{staticClass:"fas fa-angle-right"})])])])])},Da=[],wa={name:"Pagination",model:{prop:"currentPage",event:"click"},props:{prev:null,next:null,currentPage:null},methods:{nextPage(){this.$emit("click",this.currentPage+1)},prevPage(){this.$emit("click",this.currentPage-1)}}},Ea=wa,ja=(a("5eaf"),Object(p["a"])(Ea,Ca,Da,!1,null,null,null)),$a=ja.exports,Sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-sub-page-container"},[a("h2",{staticClass:"section-title"},[t._v(t._s(this.title))]),t._t("before"),t.isLoading||t.isEmpty?t._e():t._t("content"),t.isLoading?a("div",{staticClass:"spinner-wrapper"},[a("spinner-1")],1):t._e(),!t.isLoading&&t.isEmpty?a("h2",{staticClass:"empty"},[t._v(t._s(t.emptyPlaceholder||"No products found"))]):t._e(),t.isLoading?t._e():t._t("pagination")],2)},Pa=[],Aa={name:"ProfileSubPage",components:{Spinner1:J},props:{title:String,isLoading:Boolean,isEmpty:Boolean,emptyPlaceholder:String}},Ua=Aa,Ra=(a("c9b8"),Object(p["a"])(Ua,Sa,Pa,!1,null,null,null)),xa=Ra.exports,ka={name:"MyAuctions",components:{AuctionCardMini:Et,Pagination:$a,ProfileSubPage:xa},data(){return{nextPage:null,prevPage:null,currentPage:1,auctions:[],isLoading:!0}},created(){this.getAllAuthorAuction()},methods:{async getAllAuthorAuction(){this.isLoading=!0;try{const t=await this.$http.get("/api/user/my-auctions?limit=8&page="+this.currentPage);this.auctions=t.data.auctions.items,this.nextPage=t.data.auctions.next,this.prevPage=t.data.auctions.prev,this.isLoading=!1}catch(t){this.isLoading=!1}}},computed:{getCurrentPage(){return this.currentPage}},watch:{getCurrentPage(){this.getAllAuthorAuction()}}},Ta=ka,Ia=(a("0155"),Object(p["a"])(Ta,_a,ya,!1,null,null,null)),La=Ia.exports,Oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("profile-sub-page",{attrs:{emptyPlaceholder:"There are no live auctions",isEmpty:0===t.auctions.length,title:"Live Auctions",isLoading:t.isLoading}},[a("div",{attrs:{slot:"content"},slot:"content"},t._l(t.auctions,(function(t){return a("auction-card-live",{key:t._id,attrs:{id:t._id,name:t.name,image:t.image,price:t.price,endDate:new Date(t.endDate),bids:t.bids}})})),1)])},Fa=[],Ba={name:"MyLiveAuctions",components:{AuctionCardLive:ve,ProfileSubPage:xa},data(){return{auctions:[],isLoading:!0}},created(){this.getAllParticipatedInAuction()},methods:{async getAllParticipatedInAuction(){this.isLoading=!0;try{const t=await this.$http.get("/api/user/live-auctions");this.auctions=t.data.auctions,this.isLoading=!1}catch(t){this.isLoading=!1}}}},Ma=Ba,Va=Object(p["a"])(Ma,Oa,Fa,!1,null,null,null),Na=Va.exports,Ga=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("profile-sub-page",{attrs:{isEmpty:0===t.products.length,title:"Participations",isLoading:t.isLoading}},[a("div",{staticClass:"aucion-box",attrs:{slot:"content"},slot:"content"},t._l(t.products,(function(t){return a("auction-card-mini",{key:t._id,attrs:{id:t._id,name:t.name,image:t.image,price:t.price,endDate:t.endDate,buyer:t.buyer}})})),1),a("pagination",{attrs:{slot:"pagination",currentPage:t.currentPage,prev:t.prevPage,next:t.nextPage},slot:"pagination",model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},qa=[],za={name:"Participations",components:{AuctionCardMini:Et,Pagination:$a,ProfileSubPage:xa},data(){return{nextPage:null,prevPage:null,currentPage:1,products:[],isLoading:!0}},created(){this.getAllAuthorAuction()},methods:{async getAllAuthorAuction(){this.isLoading=!0;try{const t=await this.$http.get("/api/user/participations?limit=5&page="+this.currentPage);this.products=t.data.auctions.items,this.nextPage=t.data.auctions.next,this.prevPage=t.data.auctions.prev,this.isLoading=!1}catch(t){this.isLoading=!1}}},computed:{getCurrentPage(){return this.currentPage}},watch:{getCurrentPage(){this.getAllAuthorAuction()}}},Ya=za,Ha=Object(p["a"])(Ya,Ga,qa,!1,null,null,null),Wa=Ha.exports,Qa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("profile-sub-page",{attrs:{title:"Profile",isLoaded:t.spinner}},[a("div",{staticClass:"profile-content",attrs:{slot:"content"},slot:"content"},[a("VImage",{staticClass:"user-avatar",attrs:{imageUrl:t.GET_USER().avatar,defaultImage:"/default_avatar_image.svg"}}),a("form",[a("text-input",{attrs:{value:t.newImage,name:"avatar url"},model:{value:t.newImage,callback:function(e){t.newImage=e},expression:"newImage"}}),a("button",{staticClass:"primary-btn",attrs:{type:"submit",disabled:t.spinner},on:{click:t.submitImageChange}},[t._v(" Update avatar "),t.spinner?a("spinner-2"):t._e()],1)],1)],1)])},Ja=[],Za={name:"Profile",components:{ProfileSubPage:xa,VImage:g,Spinner2:at,TextInput:me},data(){return{spinner:!1,newImage:""}},methods:{...Object(c["b"])(["GET_USER"]),async submitImageChange(t){t.preventDefault();try{await this.$http.put("/api/user/changeAvatar",{avatarImage:this.newImage}),this.$store.commit("UPDATE_AVATAR",this.newImage)}catch(e){Ei.$emit("changeMessage","there is a problem with changing avatar","error")}}}},Ka=Za,Xa=(a("8819"),Object(p["a"])(Ka,Qa,Ja,!1,null,null,null)),ts=Xa.exports,es=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("profile-sub-page",{attrs:{isEmpty:0===t.products.length,title:"Purchases",isLoading:t.isLoading}},[a("div",{staticClass:"aucion-box",attrs:{slot:"content"},slot:"content"},t._l(t.products,(function(t){return a("auction-card-mini",{key:t._id,attrs:{id:t._id,name:t.name,image:t.image,price:t.price,endDate:t.endDate,buyer:t.buyer}})})),1),a("pagination",{attrs:{slot:"pagination",currentPage:t.currentPage,prev:t.prevPage,next:t.nextPage},slot:"pagination",model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},as=[],ss={name:"Purchased",components:{AuctionCardMini:Et,Pagination:$a,ProfileSubPage:xa},data(){return{nextPage:null,prevPage:null,currentPage:1,products:[],isLoading:!0}},created(){this.getAllPurchases()},methods:{async getAllPurchases(){this.isLoading=!0;try{const t=await this.$http.get("/api/user/purchased?limit=5&page="+this.currentPage);this.products=t.data.auctions.items,this.nextPage=t.data.auctions.next,this.prevPage=t.data.auctions.prev,this.isLoading=!1}catch(t){this.isLoading=!1,Ei.$emit("changeMessage","failed to load purchases","error")}}},computed:{getCurrentPage(){return this.currentPage}},watch:{getCurrentPage(){this.getAllPurchases()}}},is=ss,ns=Object(p["a"])(is,es,as,!1,null,null,null),rs=ns.exports,os=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat-container"},[s("div",{staticClass:"chat-wrap"},[s("router-view")],1),s("nav",{staticClass:"chat-rooms",class:{hide:t.hideRooms}},[s("div",{staticClass:"nav-header"},[s("span",{staticClass:"arrows",on:{click:t.toggleHideRooms}},[s("img",{attrs:{src:a("4db0"),alt:"double arrow",srcset:""}})]),s("img",{staticClass:"msg-icon",attrs:{src:a("a8ba"),alt:"chat",srcset:""}}),s("p",[t._v("Chat")])]),s("div",{staticClass:"rooms-wrapper"},[s("search-bar",{attrs:{input:t.searchQuery},on:{search:t.searchUserByUsername},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),this.myChatRooms.spinner||this.searchedUsers.spinner?s("spinner-1"):t._e(),0!==t.searchedUsers.users.length||this.myChatRooms.spinner||this.searchedUsers.spinner?t._e():s("div",{staticClass:"room-list"},t._l(t.lsitOfContacts,(function(e){return s("div",{key:e.id,staticClass:"room",on:{click:function(a){return t.gotToChat(e.id)}}},[s("VImage",{attrs:{imageUrl:e.avatar,defaultImage:"/default_avatar_image.svg"}}),e.unreadMessages?s("span",{staticClass:"dot"}):t._e(),s("span",{staticClass:"username"},[t._v(t._s(e.username))])],1)})),0),t.searchedUsers.users.length>0&&!this.searchedUsers.spinner?s("div",{staticClass:"searched-users"},[s("p",{staticClass:"search-results-tag"},[t._v("Search results for: "),s("strong",[t._v(t._s(this.searchQuery))])]),s("button",{staticClass:"clear-btn",on:{click:t.clearSearchResults}},[t._v("clear")]),s("div",{staticClass:"room-list"},t._l(t.searchedUsers.users,(function(e,a){return s("div",{key:e.id,staticClass:"room",on:{click:function(s){return t.createChatRoom(e,a)}}},[s("VImage",{attrs:{imageUrl:e.avatar,defaultImage:"/default_avatar_image.svg"}}),s("span",{staticClass:"username"},[t._v(t._s(e.username))]),t._m(0,!0)],1)})),0)]):t._e()],1)])])},cs=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"msg"},[a("i",{staticClass:"fas fa-paper-plane"})])}],ls={name:"Chat",components:{SearchBar:te,Spinner1:J,VImage:g},data(){return{hideRooms:!1,searchQuery:"",myChatRooms:{spinner:!1,rooms:[]},searchedUsers:{spinner:!1,users:[]}}},created(){this.getMyChatRooms(),Ei.$on("markUnreadMessage",t=>{this.myChatRooms.rooms=this.myChatRooms.rooms.map(e=>e._id===t?{...e,unreadMessages:!0}:e)})},methods:{...Object(c["b"])(["GET_USER"]),toggleHideRooms(){this.hideRooms=!this.hideRooms},gotToChat(t){this.myChatRooms.rooms=this.myChatRooms.rooms.map(e=>e._id===t?{...e,unreadMessages:!1}:e),this.$router.push("/chat/"+t).catch(()=>{})},async getMyChatRooms(){this.myChatRooms.spinner=!0;try{const t=await this.$http.get("/api/chat/my-chat"),e=await this.$http.get("/api/chat/unread-messages");this.myChatRooms.spinner=!1,this.myChatRooms.rooms=t.data.chatRooms.map(t=>e.data.chatRooms.find(e=>e._id===t._id)?{...t,unreadMessages:!0}:{...t,unreadMessages:!1})}catch(t){this.myChatRooms.spinner=!1}},async searchUserByUsername(){this.searchedUsers.spinner=!0;try{const t=await this.$http.get("/api/chat/users?username="+this.searchQuery);let e=t.data.users.filter(t=>t.username!==this.GET_USER().username);e=e.filter(t=>!this.lsitOfContacts.find(e=>e.username===t.username)),this.searchedUsers.spinner=!1,this.searchedUsers.users=e.map(t=>({id:t._id,username:t.username,avatar:t.avatarImage||""}))}catch(t){Ei.$emit("changeMessage",t.response.msg,"error"),this.searchedUsers.spinner=!1}},clearSearchResults(){this.searchQuery="",this.searchedUsers.users=[]},async createChatRoom(t,e){try{const a=await this.$http.post("/api/chat/"+t.username),s=a.data.savedChatRoom;s.participants=[{...t,avatarImage:t.avatar}],this.myChatRooms.rooms.push(s),this.searchedUsers.users.splice(e,1),this.clearSearchResults(),this.gotToChat(s._id)}catch(a){Ei.$emit("changeMessage",a.response.msg,"error")}}},computed:{lsitOfContacts(){return this.myChatRooms.rooms.map(t=>{const e=t.participants.filter(t=>t.username!==this.GET_USER().username)[0];return{id:t._id,username:e.username,avatar:e.avatarImage||"",unreadMessages:t.unreadMessages}})}}},us=ls,ds=(a("9c66"),Object(p["a"])(us,os,cs,!1,null,null,null)),ms=ds.exports,ps=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},hs=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"error-page-contaier"},[a("h1",[t._v("Error - page not fount")])])}],gs={name:"ErrorPage"},vs=gs,fs=(a("2e4b"),Object(p["a"])(vs,ps,hs,!1,null,null,null)),bs=fs.exports,_s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"section"},[a("chat-header",{attrs:{username:t.user.username,imageLink:t.user.avatarImage,isOnline:2===t.userOnlineCount}}),a("div",{ref:"convo",staticClass:"scrollable-content chat-box-wrapper"},[a("chat-conversation",{attrs:{posts:t.conversation,newPosts:t.newMessages,authorUsername:t.GET_USER().username}})],1),a("chat-input",{on:{post:t.sendAMessage}})],1)])},ys=[],Cs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chat-header"},[a("v-image",{attrs:{imageUrl:t.imageLink,defaultImage:"/default_avatar_image.svg"}}),a("div",{staticClass:"text-container"},[a("h2",{staticClass:"chat-room-title"},[t._v(t._s(this.username))]),a("div",{staticClass:"status"},[a("span",{staticClass:"dot",class:{online:t.isOnline}}),a("span",{staticClass:"status-text"},[t._v(t._s(this.isOnline?"Online":"Offline"))])])])],1)},Ds=[],ws={name:"ChatHeader",components:{VImage:g},props:{isOnline:{type:Boolean},username:{type:String},imageLink:{type:String,default:""}}},Es=ws,js=(a("3027"),Object(p["a"])(Es,Cs,Ds,!1,null,null,null)),$s=js.exports,Ss=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"chat-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.postContent,expression:"postContent"}],staticClass:"message",domProps:{value:t.postContent},on:{input:function(e){e.target.composing||(t.postContent=e.target.value)}}}),a("button",{staticClass:"send-post-button",class:{active:t.postContent.length>0},attrs:{type:"submit"},on:{click:t.sendMessage}},[a("i",{staticClass:"fas fa-paper-plane"})])])},Ps=[],As={name:"ChatInput",data(){return{postContent:""}},methods:{sendMessage(t){t.preventDefault(),this.$emit("post",this.postContent),this.postContent=""}}},Us=As,Rs=(a("8c12"),Object(p["a"])(Us,Ss,Ps,!1,null,null,null)),xs=Rs.exports,ks=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"chat-conversation"},[t._l(t.posts,(function(e){return a("div",{key:e._id,staticClass:"post-wrapper"},[t.oldenstNewMessage===e._id&&e.author.username!==t.authorUsername?a("span",{staticClass:"new-messages"},[t._v("New Messages")]):t._e(),a("post",{attrs:{timeStamp:new Date(e.timeStamp),message:e.content,isAuthor:e.author.username===t.authorUsername}})],1)})),t._l(t.newPosts,(function(e){return a("post",{key:e._id,attrs:{animate:!0,timeStamp:new Date(e.timeStamp),message:e.content,isAuthor:e.author.username===t.authorUsername}})}))],2)},Ts=[],Is=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"post-container",class:{author:this.isAuthor,animate:t.animate}},[a("p",{staticClass:"message"},[t._v(t._s(this.message))]),a("span",{staticClass:"time-stamp"},[t._v(t._s(t.momentTime))])])},Ls=[],Os={name:"Post",props:{message:{type:String},animate:{type:Boolean,default:!1},timeStamp:{type:Date},isAuthor:{type:Boolean,default:!1}},computed:{momentTime(){return Ut()(this.timeStamp).fromNow()}}},Fs=Os,Bs=(a("84b8"),Object(p["a"])(Fs,Is,Ls,!1,null,null,null)),Ms=Bs.exports,Vs={components:{Post:Ms},name:"ChatConversation",props:{posts:{type:Array},newPosts:{type:Array},authorUsername:{type:String}},computed:{oldenstNewMessage(){const t=this.posts.filter(({recieved:t})=>!1===t);return t.length>0?t[0]._id:""}}},Ns=Vs,Gs=(a("a26f"),Object(p["a"])(Ns,ks,Ts,!1,null,null,null)),qs=Gs.exports,zs={name:"ChatBox",components:{ChatHeader:$s,ChatInput:xs,ChatConversation:qs},data(){return{userOnlineCount:0,user:{username:"",id:"",avatarImage:""},chatId:"",spinner:!0,conversation:[],newMessages:[]}},watch:{$route(t){this.leaveChatRoom(),this.chatId=t.params.id,this.getChatRoomInfo()}},updated(){const t=this.$refs.convo.scrollHeight;this.$refs.convo.scrollTop=t},created(){this.getChatRoomInfo()},destroyed(){this.leaveChatRoom()},methods:{...Object(c["b"])(["GET_USER"]),async getChatRoomInfo(){try{const t=await this.$http.get("/api/chat/"+this.$route.params.id);this.spinner=!1,this.user=t.data.chatRoom.participants.filter(t=>t.username!==this.GET_USER().username)[0],this.chatId=t.data.chatRoom._id,this.conversation=t.data.chatRoom.messages,this.recieveUnreadMessages(),this.joinChatRoom()}catch(t){this.spinner=!1,Ei.$emit("changeMessage","failed to load chat","error")}},getUserCountInRoom(t){this.userOnlineCount=t},getMessage(t){this.newMessages.push(t)},leaveChatRoom(){this.$sock.emit("unsubscribe",{room:this.chatId,user:this.GET_USER().username}),this.$sock.removeListener("roomInfo",this.getUserCountInRoom),this.$sock.removeListener("sendInfo",this.getMessage)},joinChatRoom(){this.$sock.emit("subscribe",{room:this.chatId}),this.$sock.on("roomInfo",this.getUserCountInRoom),this.$sock.on("sendInfo",this.getMessage)},async recieveUnreadMessages(){try{await this.$http.patch(`/api/chat/${this.chatId}/recieve`)}catch(t){}},sendAMessage(t){""!==t&&this.$sock.emit("sendMsg",{post:t,recieved:2===this.userOnlineCount,roomId:this.chatId,recipientId:this.user.id},t=>{Ei.$emit("changeMessage",t,"error")})}}},Ys=zs,Hs=(a("6eb9"),Object(p["a"])(Ys,_s,ys,!1,null,null,null)),Ws=Hs.exports,Qs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auctions-container"},[t.isLoading?a("spinner-1"):t._e(),t.isLoading?t._e():a("product-container",{attrs:{auctions:t.auctions}}),a("pagination",{attrs:{currentPage:t.page.current,prev:t.page.prev,next:t.page.next},model:{value:t.page.current,callback:function(e){t.$set(t.page,"current",e)},expression:"page.current"}})],1)},Js=[],Zs={name:"Auctions",components:{ProductContainer:ye,Spinner1:J,Pagination:$a},data(){return{auctions:[],page:{current:1,prev:null,next:null},isLoading:!0}},created(){this.fetchAuctions()},methods:{async fetchAuctions(){this.isLoading=!0;try{const t=await this.$http.get(`/api/auction?page=${this.page.current}&limit=16&finished=false`),{items:e,next:a,prev:s}=t.data.auctions;this.auctions=e,this.isLoading=!1,this.page.next=a,this.page.prev=s}catch(t){this.isLoading=!1}}},computed:{getCurrentPage(){return this.page.current}},watch:{getCurrentPage(){this.fetchAuctions()}}},Ks=Zs,Xs=(a("3acd"),Object(p["a"])(Ks,Qs,Js,!1,null,null,null)),ti=Xs.exports;const ei={user:!1,avatar:"",userId:null},ai={GET_USER:t=>({username:t.user,avatar:t.avatar}),GET_USERID:t=>t.userId},si={LOGOUT:({commit:t})=>{ji.$http.get("/api/auth/logout").then(()=>{ji.$sock.close(),t("UPDATE_USER",null),t("UPDATE_USERID",null),vi.push("/").catch(()=>{})})}},ii={UPDATE_USER(t,e){t.user=e},UPDATE_AVATAR(t,e){t.avatar=e},UPDATE_USERID(t,e){t.userId=e}};var ni={state:ei,getters:ai,actions:si,mutations:ii};const ri={currency:"USD"},oi={GET_CURRENCY:t=>t.currency},ci={},li={SET_CURRENCY(t,e){t.currency=e}};var ui={state:ri,getters:oi,actions:ci,mutations:li};s["a"].use(c["a"]);var di=new c["a"].Store({modules:{user:ni,currency:ui}});const mi=(t,e,a)=>{di.getters.GET_USER.username?a():di.watch(()=>di.getters.GET_USER.username,()=>{null!==di.getters.GET_USER.username?a():a("/login")})},pi=(t,e,a)=>{const{title:s}=t.meta;document.title="function"===typeof s?s(t.params.id):s,a()};s["a"].use(N["a"]);const hi=[{path:"/",name:"Home",component:Ee,meta:{title:"bidit | Home"}},{path:"/login",name:"Login",component:Ue,meta:{title:"bidit | Login"}},{path:"/register",name:"Register",component:Le,meta:{title:"bidit | Register"}},{path:"/new-auction",name:"NewAuction",component:We,meta:{title:"bidit | Create New Auction"},beforeEnter:mi},{path:"/auction",name:"Auctions",component:ti,meta:{title:"bidit | auctions"}},{path:"/auction/:id",name:"AuctionShow",component:ra,meta:{title:t=>"bidit | auction "+t}},{path:"/auction/:id/edit",name:"EditAuction",component:ma,meta:{title:"bidit | Edit"}},{path:"/profile",component:ba,meta:{title:"bidit | Profile"},beforeEnter:mi,children:[{name:"Details",path:"/",component:ts,meta:{title:"bidit | Profile"}},{name:"LiveAuctions",path:"live-auctions",component:Na,meta:{title:"bidit | Profile - live auctions"}},{name:"MyAuctions",path:"my-auctions",component:La,meta:{title:"bidit | Profile - my auctions"}},{name:"Participated",path:"participated",component:Wa,meta:{title:"bidit | Profile - participated auctions"}},{name:"Purchased",path:"purchased",component:rs,meta:{title:"bidit | Profile - purchased"}}]},{path:"/chat",name:"Chat",component:ms,meta:{title:"bidit | Chat"},children:[{path:":id",component:Ws,meta:{title:t=>"bidit | Chat "+t}}],beforeEnter:mi},{path:"/error-notfound",name:"ErrorPage",component:bs,meta:{title:"bidit | Error"}},{path:"/*",redirect:{name:"ErrorPage"}}],gi=new N["a"]({mode:"history",base:"/",routes:hi});gi.beforeEach(pi);var vi=gi,fi=a("bc3a"),bi=a.n(fi),_i=a("8055"),yi=a.n(_i);s["a"].config.productionTip=!1;const Ci="/",Di=bi.a.create({baseURL:Ci,withCredentials:!0}),wi=yi()(Ci,{autoConnect:!1});s["a"].prototype.$http=Di,s["a"].prototype.$sock=wi;const Ei=new s["a"];var ji=e["default"]=new s["a"]({store:di,router:vi,render:t=>t(V)}).$mount("#app")},"57af":function(t,e,a){"use strict";var s=a("e910"),i=a.n(s);i.a},"5c0b":function(t,e,a){"use strict";var s=a("9c0c"),i=a.n(s);i.a},"5e34":function(t,e,a){"use strict";var s=a("7f6f"),i=a.n(s);i.a},"5eaf":function(t,e,a){"use strict";var s=a("2aa4"),i=a.n(s);i.a},"6c3d":function(t,e,a){"use strict";var s=a("bea4"),i=a.n(s);i.a},"6eb9":function(t,e,a){"use strict";var s=a("a8d2"),i=a.n(s);i.a},7509:function(t,e,a){},7757:function(t,e,a){"use strict";var s=a("214a"),i=a.n(s);i.a},"7f6f":function(t,e,a){},8264:function(t,e,a){},8468:function(t,e,a){},"84b8":function(t,e,a){"use strict";var s=a("9e03"),i=a.n(s);i.a},8819:function(t,e,a){"use strict";var s=a("af8b"),i=a.n(s);i.a},"89f7":function(t,e,a){},"8aed":function(t,e,a){},"8b13":function(t,e,a){},"8c12":function(t,e,a){"use strict";var s=a("ca2c"),i=a.n(s);i.a},"8cf7":function(t,e,a){"use strict";var s=a("8aed"),i=a.n(s);i.a},"95ab":function(t,e,a){},"9b19":function(t,e,a){t.exports=a.p+"img/logo.c2eef5e3.svg"},"9c0c":function(t,e,a){},"9c66":function(t,e,a){"use strict";var s=a("8264"),i=a.n(s);i.a},"9e03":function(t,e,a){},"9faf":function(t,e,a){},a150:function(t,e,a){t.exports=a.p+"img/source_code_icon.bbbfe930.svg"},a26f:function(t,e,a){"use strict";var s=a("9faf"),i=a.n(s);i.a},a894:function(t,e,a){"use strict";var s=a("db38"),i=a.n(s);i.a},a8ba:function(t,e,a){t.exports=a.p+"img/message-icon-blue.ae56a769.svg"},a8d2:function(t,e,a){},aa00:function(t,e,a){"use strict";var s=a("3f86"),i=a.n(s);i.a},adc4:function(t,e,a){t.exports=a.p+"img/user_icon.9f3c32a8.svg"},af8b:function(t,e,a){},ba9a:function(t,e,a){},bc1d:function(t,e,a){},bd20:function(t,e,a){t.exports=a.p+"img/lock-icon.f97caec8.svg"},bea4:function(t,e,a){},c880:function(t,e,a){},c9b8:function(t,e,a){"use strict";var s=a("09d6"),i=a.n(s);i.a},ca2c:function(t,e,a){},cd8c:function(t,e,a){},d0a1:function(t,e,a){},db38:function(t,e,a){},dd5f:function(t,e,a){"use strict";var s=a("0f65"),i=a.n(s);i.a},de19:function(t,e,a){t.exports=a.p+"img/wave_bg.225dc858.svg"},e605:function(t,e,a){"use strict";var s=a("c880"),i=a.n(s);i.a},e910:function(t,e,a){},e917:function(t,e,a){"use strict";var s=a("95ab"),i=a.n(s);i.a},e93e:function(t,e,a){"use strict";var s=a("e97a"),i=a.n(s);i.a},e97a:function(t,e,a){},f3c4:function(t,e,a){t.exports=a.p+"img/message-icon.8b41aac3.svg"},f51c:function(t,e,a){t.exports=a.p+"img/more.a09360c7.svg"},f8fc:function(t,e,a){t.exports=a.p+"img/sold_image.a9a99786.png"},fb84:function(t,e,a){t.exports=a.p+"img/love.44080989.svg"}});
//# sourceMappingURL=app.d2b5c0dc.js.map